"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[996],{9807:(v,g,o)=>{o.d(g,{J:()=>f});var d=o(520),a=o(2340),l=o(4004),h=o(5e3),t=o(6705);const u=`${a.N.apiUrl}/Company`;let f=(()=>{class s{constructor(r,p){this.http=r,this.authService=p;const y=this.authService.getAuthFromLocalStorage();!y||!y.access_token||(this.httpHeaders=new d.WM({Authorization:`${y.access_token}`}))}createCompany(r){return this.http.post(`${u}/CreateCompany`,r,{headers:this.httpHeaders})}updateCompany(r){return this.http.put(`${u}/UpdateCompany`,r,{headers:this.httpHeaders})}getCompanies(){return this.http.get(`${u}/GetCompanies`,{headers:this.httpHeaders}).pipe((0,l.U)(r=>r.data))}getCompanyDetail(r){return this.http.get(`${u}/GetCompanyById?id=${r}`,{headers:this.httpHeaders}).pipe((0,l.U)(p=>p))}updateCompanyStatus(r){return this.http.put(`${u}/UpdateCompanyStatus?id=${r}`,null,{headers:this.httpHeaders}).pipe((0,l.U)(p=>p))}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(d.eN),h.LFG(t.e))},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},3996:(v,g,o)=>{o.r(g),o.d(g,{CompanyEditModule:()=>_});var d=o(9808),a=o(3075),l=o(7579),h=o(1135),t=o(5e3),u=o(9807),f=o(4521),s=o(4383),c=o(7322),r=o(7531);function p(e,m){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Ad "),t.TgZ(2,"strong"),t._uU(3,"Zorunludur"),t.qZA()())}function y(e,m){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Telefon "),t.TgZ(2,"strong"),t._uU(3,"Zorunludur"),t.qZA()())}function Z(e,m){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Vergi Numaras\u0131 "),t.TgZ(2,"strong"),t._uU(3,"Zorunludur"),t.qZA()())}function U(e,m){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Vergi Adresi "),t.TgZ(2,"strong"),t._uU(3,"Zorunludur"),t.qZA()())}function A(e,m){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Sorgu \xdccreti"),t.TgZ(2,"strong"),t._uU(3,"Zorunludur"),t.qZA()())}function E(e,m){1&e&&(t.ynx(0),t._uU(1,"Kaydet"),t.BQk())}function x(e,m){1&e&&(t.ynx(0),t.TgZ(1,"span",22),t._uU(2," L\xfctfen bekleyiniz... "),t._UZ(3,"span",23),t.qZA(),t.BQk()),2&e&&(t.xp6(1),t.Udp("display","block"))}let T=(()=>{class e{constructor(n,i,C,L,O){this.fb=n,this.companyService=i,this.activatedRoute=C,this.toastrService=L,this.router=O,this.unsubscribe=[],this._onDestroy=new l.x,this.isLoadingSubject=new h.X(!1),this.isLoading$=this.isLoadingSubject.asObservable()}ngOnInit(){this.companyId=this.activatedRoute.snapshot.params.id,this.companyService.getCompanyDetail(this.companyId).subscribe(n=>{this.updateCompanyForm.controls.id.setValue(n.data.id),this.updateCompanyForm.controls.name.setValue(n.data.name),this.updateCompanyForm.controls.phone.setValue(n.data.phone),this.updateCompanyForm.controls.taxNumber.setValue(n.data.taxNumber),this.updateCompanyForm.controls.taxOffice.setValue(n.data.taxOffice),this.updateCompanyForm.controls.queryPrice.setValue(n.data.queryPrice),this.updateCompanyForm.controls.isActive.setValue(n.data.isActive)}),this.updateCompanyForm=this.fb.group({id:["",a.kI.required],name:["",a.kI.required],phone:["",a.kI.required],taxNumber:["",a.kI.required],taxOffice:["",a.kI.required],queryPrice:[0,a.kI.required],isActive:[!0,a.kI.required]})}updateCompany(){this.isLoadingSubject.next(!0),this.message="",this.updateCompanyForm.valid?this.companyService.updateCompany(this.updateCompanyForm.value).subscribe(n=>{this.toastrService.success("\u0130\u015flem Ba\u015far\u0131l\u0131"),this.isLoadingSubject.next(!1),this.router.navigate(["/companies"])},n=>{console.log(n),n.error.messages.forEach(i=>{this.message+=i+". "}),this.toastrService.error(this.message,"Hata"),this.isLoadingSubject.next(!1)}):(this.toastrService.warning("Formu Kontrol Ediniz.","Uyar\u0131"),this.isLoadingSubject.next(!1))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(a.qu),t.Y36(u.J),t.Y36(f.gz),t.Y36(s._W),t.Y36(f.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-company-edit"]],inputs:{companyId:"companyId"},decls:52,vars:15,consts:[["id","kt_profile_details_view",1,"card","mb-5","mb-xl-12"],[1,"card-header","cursor-pointer"],[1,"card-title","m-0"],[1,"fw-bolder","m-0"],["novalidate","novalidate",1,"form","col-lg-12","mx-auto",3,"formGroup"],["type","text","matInput","","name","id","formControlName","id","hidden",""],[1,"card-body","p-9"],[1,"row"],[1,"col-lg-6","mb-5","fv-row"],["appearance","fill",1,"example-full-width"],["type","text","matInput","","name","name","formControlName","name"],[4,"ngIf"],["type","text","matInput","","name","phone","formControlName","phone"],["type","text","matInput","","name","taxNumber","formControlName","taxNumber"],["type","text","matInput","","name","taxOffice","formControlName","taxOffice"],["type","number","matInput","","name","queryPrice","formControlName","queryPrice"],[1,"col-lg-6","mb-5","fv-row",2,"align-self","center"],[1,"form-check","form-switch","form-check-custom"],["formControlName","isActive","type","checkbox","value","true",1,"form-check-input","ng-valid","ng-dirty","ng-touched"],[1,"form-check-label"],[1,"card-footer","d-flex","justify-content-end","py-6","px-9"],["type","button",1,"btn","btn-sm","btn-success",3,"disabled","click"],["clas","indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4,"Firma Ekle"),t.qZA()()(),t.TgZ(5,"form",4),t._UZ(6,"input",5),t.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"mat-form-field",9)(11,"mat-label"),t._uU(12,"Ad"),t.qZA(),t._UZ(13,"input",10),t.YNc(14,p,4,0,"mat-error",11),t.qZA()(),t.TgZ(15,"div",8)(16,"mat-form-field",9)(17,"mat-label"),t._uU(18,"Telefon"),t.qZA(),t._UZ(19,"input",12),t.YNc(20,y,4,0,"mat-error",11),t.qZA()(),t.TgZ(21,"div",8)(22,"mat-form-field",9)(23,"mat-label"),t._uU(24,"Vergi Numaras\u0131"),t.qZA(),t._UZ(25,"input",13),t.YNc(26,Z,4,0,"mat-error",11),t.qZA()(),t.TgZ(27,"div",8)(28,"mat-form-field",9)(29,"mat-label"),t._uU(30,"Vergi Adresi"),t.qZA(),t._UZ(31,"input",14),t.YNc(32,U,4,0,"mat-error",11),t.qZA()(),t.TgZ(33,"div",8)(34,"mat-form-field",9)(35,"mat-label"),t._uU(36,"Sorgu \xdccreti"),t.qZA(),t._UZ(37,"input",15),t.YNc(38,A,4,0,"mat-error",11),t.qZA()(),t._UZ(39,"br"),t.TgZ(40,"div",16)(41,"label",17),t._UZ(42,"input",18),t.TgZ(43,"span",19),t._uU(44,"Aktif / Pasif"),t.qZA()()()()(),t.TgZ(45,"div",20)(46,"button",21),t.NdJ("click",function(){return i.updateCompany()}),t.ALo(47,"async"),t.YNc(48,E,2,0,"ng-container",11),t.ALo(49,"async"),t.YNc(50,x,4,2,"ng-container",11),t.ALo(51,"async"),t.qZA()()()()),2&n&&(t.xp6(5),t.Q6J("formGroup",i.updateCompanyForm),t.xp6(9),t.Q6J("ngIf",i.updateCompanyForm.controls.name.hasError("required")),t.xp6(6),t.Q6J("ngIf",i.updateCompanyForm.controls.phone.hasError("required")),t.xp6(6),t.Q6J("ngIf",i.updateCompanyForm.controls.taxNumber.hasError("required")),t.xp6(6),t.Q6J("ngIf",i.updateCompanyForm.controls.taxOffice.hasError("required")),t.xp6(6),t.Q6J("ngIf",i.updateCompanyForm.controls.queryPrice.hasError("required")),t.xp6(8),t.Q6J("disabled",i.updateCompanyForm.invalid||t.lcZ(47,9,i.isLoading$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(49,11,i.isLoading$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(51,13,i.isLoading$)))},dependencies:[d.O5,a._Y,a.Fj,a.wV,a.Wl,a.JJ,a.JL,a.sg,a.u,c.TO,c.KE,c.hX,r.Nt,d.Ov],encapsulation:2}),e})();var b=o(520),I=o(4964),F=o(4619),N=o(4102),S=o(5245);let _=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.ez,f.Bz.forChild([{path:"",component:T}]),a.u5,a.UX,b.JF,I.Z,F.vi,c.lN,r.c,N.LD,S.Ps]}),e})()}}]);