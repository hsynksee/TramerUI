"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[17],{9807:(A,f,r)=>{r.d(f,{J:()=>g});var c=r(520),o=r(2340),h=r(4004),u=r(5e3),e=r(6705);const d=`${o.N.apiUrl}/Company`;let g=(()=>{class l{constructor(s,m){this.http=s,this.authService=m;const p=this.authService.getAuthFromLocalStorage();!p||!p.access_token||(this.httpHeaders=new c.WM({Authorization:`${p.access_token}`}))}createCompany(s){return this.http.post(`${d}/CreateCompany`,s,{headers:this.httpHeaders})}updateCompany(s){return this.http.put(`${d}/UpdateCompany`,s,{headers:this.httpHeaders})}getCompanies(){return this.http.get(`${d}/GetCompanies`,{headers:this.httpHeaders}).pipe((0,h.U)(s=>s.data))}getCompanyDetail(s){return this.http.get(`${d}/GetCompanyById?id=${s}`,{headers:this.httpHeaders}).pipe((0,h.U)(m=>m))}updateCompanyStatus(s){return this.http.put(`${d}/UpdateCompanyStatus?id=${s}`,null,{headers:this.httpHeaders}).pipe((0,h.U)(m=>m))}}return l.\u0275fac=function(s){return new(s||l)(u.LFG(c.eN),u.LFG(e.e))},l.\u0275prov=u.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},4017:(A,f,r)=>{r.r(f),r.d(f,{UserCreateModule:()=>$});var c=r(9808),o=r(3075),h=r(1135),u=r(5584),e=r(5e3),d=r(9807),g=r(8208),l=r(6705),v=r(4383),s=r(4521),m=r(7322),p=r(7531),Z=r(4102),y=r(508);function T(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Ad "),e.TgZ(2,"strong"),e._uU(3,"Zorunludur"),e.qZA()())}function S(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Soyad "),e.TgZ(2,"strong"),e._uU(3,"Zorunludur"),e.qZA()())}function x(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," E-posta "),e.TgZ(2,"strong"),e._uU(3,"Zorunludur"),e.qZA()())}function E(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Telefon Numaras\u0131 "),e.TgZ(2,"strong"),e._uU(3,"Zorunludur"),e.qZA()())}function F(t,i){if(1&t&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&t){const n=i.$implicit,a=e.oxw();e.Q6J("value",n),e.xp6(1),e.hij(" ",a.userRoleLabelMapping[n]," ")}}function L(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Kullan\u0131c\u0131 Rol\xfc "),e.TgZ(2,"strong"),e._uU(3,"Zorunludur"),e.qZA()())}function N(t,i){if(1&t&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&t){const n=i.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function b(t,i){if(1&t&&(e.TgZ(0,"div",7)(1,"mat-form-field",8)(2,"mat-label"),e._uU(3,"Firma"),e.qZA(),e.TgZ(4,"mat-select",20)(5,"mat-option",19),e._uU(6,"Se\xe7iniz"),e.qZA(),e.YNc(7,N,2,2,"mat-option",15),e.qZA()()()),2&t){const n=e.oxw();e.xp6(5),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",n._companyList)}}function _(t,i){1&t&&(e.ynx(0),e._uU(1,"Kaydet"),e.BQk())}function J(t,i){1&t&&(e.ynx(0),e.TgZ(1,"span",21),e._uU(2," L\xfctfen bekleyiniz... "),e._UZ(3,"span",22),e.qZA(),e.BQk()),2&t&&(e.xp6(1),e.Udp("display","block"))}let R=(()=>{class t{constructor(n,a,I,K,j,D){this.fb=n,this.companyService=a,this.userService=I,this.authService=K,this.toastrService=j,this.router=D,this.userRole=null,this.userRoleLabelMapping=u.o,this.userRoleEnumSource=Object.values(u.t).filter(C=>"number"==typeof C),this.isLoadingSubject=new h.X(!1),this.isLoading$=this.isLoadingSubject.asObservable(),this.userRole=this.authService.currentUserValue.roleId,this.userRole!=u.t.SystemAdmin&&(this.userRoleEnumSource=this.userRoleEnumSource.filter(C=>C!=u.t.SystemAdmin))}ngOnInit(){var n=this.authService.currentUserValue;this.companyService.getCompanies().subscribe(a=>{this._companyList=a}),this.createUserForm=this.fb.group({companyId:[null,o.kI.required],roleId:[null,o.kI.required],name:["",o.kI.required],surname:["",o.kI.required],email:["",[o.kI.required,o.kI.email]],phoneNumber:["",o.kI.required]}),this.hasRole(u.t.CompanyAdmin)&&(this.createUserForm=this.fb.group({companyId:[n.companyId,o.kI.required],roleId:[null,o.kI.required],name:["",o.kI.required],surname:["",o.kI.required],email:["",[o.kI.required,o.kI.email]],phoneNumber:["",o.kI.required]}))}createUser(){this.isLoadingSubject.next(!0),this.message="",this.createUserForm.valid?(console.log(this.createUserForm.value),this.userService.createUser(this.createUserForm.value).subscribe(n=>{this.toastrService.success("\u0130\u015flem Ba\u015far\u0131l\u0131"),this.isLoadingSubject.next(!1),this.router.navigate(["/users"])},n=>{n.error.messages.forEach(a=>{this.message+=a+". "}),this.toastrService.error(this.message,"Hata"),this.isLoadingSubject.next(!1)})):(this.toastrService.warning("Formu Kontrol Ediniz","Uyar\u0131"),this.isLoadingSubject.next(!1))}hasRole(n){let a=!1;return this.userRole==n&&(a=!0),a}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(o.qu),e.Y36(d.J),e.Y36(g.K),e.Y36(l.e),e.Y36(v._W),e.Y36(s.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-create"]],decls:47,vars:17,consts:[["id","kt_profile_details_view",1,"card","mb-5","mb-xl-12"],[1,"card-header","cursor-pointer"],[1,"card-title","m-0"],[1,"fw-bolder","m-0"],["novalidate","novalidate",1,"form","col-lg-12","mx-auto",3,"formGroup"],[1,"card-body","p-9"],[1,"row"],[1,"col-lg-6","mb-5","fv-row"],["appearance","fill",1,"example-full-width"],["type","text","matInput","","name","name","formControlName","name"],[4,"ngIf"],["type","text","matInput","","name","surname","formControlName","surname"],["type","text","matInput","","name","email","formControlName","email"],["type","text","matInput","","name","phoneNumber","formControlName","phoneNumber"],["name","roleId","formControlName","roleId"],[3,"value",4,"ngFor","ngForOf"],["class","col-lg-6 mb-5 fv-row",4,"ngIf"],[1,"card-footer","d-flex","justify-content-end","py-6","px-9"],["type","button",1,"btn","btn-sm","btn-success",3,"disabled","click"],[3,"value"],["formControlName","companyId"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e._uU(4,"Kullan\u0131c\u0131 Ekle"),e.qZA()()(),e.TgZ(5,"form",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"mat-form-field",8)(10,"mat-label"),e._uU(11,"Ad"),e.qZA(),e._UZ(12,"input",9),e.YNc(13,T,4,0,"mat-error",10),e.qZA()(),e.TgZ(14,"div",7)(15,"mat-form-field",8)(16,"mat-label"),e._uU(17,"Soyad"),e.qZA(),e._UZ(18,"input",11),e.YNc(19,S,4,0,"mat-error",10),e.qZA()(),e.TgZ(20,"div",7)(21,"mat-form-field",8)(22,"mat-label"),e._uU(23,"E-posta"),e.qZA(),e._UZ(24,"input",12),e.YNc(25,x,4,0,"mat-error",10),e.qZA()(),e.TgZ(26,"div",7)(27,"mat-form-field",8)(28,"mat-label"),e._uU(29,"Telefon Numaras\u0131"),e.qZA(),e._UZ(30,"input",13),e.YNc(31,E,4,0,"mat-error",10),e.qZA()(),e.TgZ(32,"div",7)(33,"mat-form-field",8)(34,"mat-label"),e._uU(35,"Kullan\u0131c\u0131 Rol\xfc"),e.qZA(),e.TgZ(36,"mat-select",14),e.YNc(37,F,2,2,"mat-option",15),e.qZA(),e.YNc(38,L,4,0,"mat-error",10),e.qZA()(),e.YNc(39,b,8,2,"div",16),e.qZA()(),e.TgZ(40,"div",17)(41,"button",18),e.NdJ("click",function(){return a.createUser()}),e.ALo(42,"async"),e.YNc(43,_,2,0,"ng-container",10),e.ALo(44,"async"),e.YNc(45,J,4,2,"ng-container",10),e.ALo(46,"async"),e.qZA()()()()),2&n&&(e.xp6(5),e.Q6J("formGroup",a.createUserForm),e.xp6(8),e.Q6J("ngIf",a.createUserForm.controls.name.hasError("required")),e.xp6(6),e.Q6J("ngIf",a.createUserForm.controls.surname.hasError("required")),e.xp6(6),e.Q6J("ngIf",a.createUserForm.controls.email.hasError("required")),e.xp6(6),e.Q6J("ngIf",a.createUserForm.controls.phoneNumber.hasError("required")),e.xp6(6),e.Q6J("ngForOf",a.userRoleEnumSource),e.xp6(1),e.Q6J("ngIf",a.createUserForm.controls.roleId.hasError("required")),e.xp6(1),e.Q6J("ngIf",a.hasRole(1)),e.xp6(2),e.Q6J("disabled",a.createUserForm.invalid||e.lcZ(42,11,a.isLoading$)),e.xp6(2),e.Q6J("ngIf",!e.lcZ(44,13,a.isLoading$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(46,15,a.isLoading$)))},dependencies:[c.sg,c.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,m.TO,m.KE,m.hX,p.Nt,Z.gD,y.ey,c.Ov]}),t})();var O=r(520),Y=r(4964),q=r(4619),U=r(8705),M=r(6856),Q=r(5245);let $=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.ez,s.Bz.forChild([{path:"",component:R}]),o.u5,o.UX,O.JF,Y.Z,q.vi,m.lN,p.c,Z.LD,Q.Ps,U.EC,M.FA,y.XK,U.Yy,U.K]}),t})()}}]);