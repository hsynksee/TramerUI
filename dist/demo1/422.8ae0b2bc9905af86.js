"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[422],{5788:(X,p,o)=>{o.r(p),o.d(p,{UserUpdateModule:()=>K});var i=o(9808),n=o(3075),v=o(7579),Z=o(1135),u=o(5584),e=o(5e3),T=o(8208),y=o(9807),b=o(6705),l=o(4521),x=o(4383),m=o(7322),c=o(7531),f=o(4102),U=o(508);function I(t,s){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Ad "),e.TgZ(2,"strong"),e._uU(3,"Zorunludur"),e.qZA()())}function A(t,s){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Soyad "),e.TgZ(2,"strong"),e._uU(3,"Zorunludur"),e.qZA()())}function F(t,s){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," E-posta "),e.TgZ(2,"strong"),e._uU(3,"Zorunludur"),e.qZA()())}function C(t,s){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Telefon Numaras\u0131 "),e.TgZ(2,"strong"),e._uU(3,"Zorunludur"),e.qZA()())}function S(t,s){if(1&t&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&t){const r=s.$implicit,a=e.oxw();e.Q6J("value",r),e.xp6(1),e.hij(" ",a.userRoleLabelMapping[r]," ")}}function N(t,s){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Kullan\u0131c\u0131 Rol\xfc "),e.TgZ(2,"strong"),e._uU(3,"Zorunludur"),e.qZA()())}function J(t,s){if(1&t&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&t){const r=s.$implicit;e.Q6J("value",r.id),e.xp6(1),e.Oqu(r.name)}}function L(t,s){if(1&t&&(e.TgZ(0,"div",8)(1,"mat-form-field",9)(2,"mat-label"),e._uU(3,"Firma"),e.qZA(),e.TgZ(4,"mat-select",21)(5,"mat-option",20),e._uU(6,"Se\xe7iniz"),e.qZA(),e.YNc(7,J,2,2,"mat-option",16),e.qZA()()()),2&t){const r=e.oxw();e.xp6(5),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",r._companyList)}}function q(t,s){1&t&&(e.ynx(0),e._uU(1,"Kaydet"),e.BQk())}function Y(t,s){1&t&&(e.ynx(0),e.TgZ(1,"span",22),e._uU(2," L\xfctfen bekleyiniz... "),e._UZ(3,"span",23),e.qZA(),e.BQk()),2&t&&(e.xp6(1),e.Udp("display","block"))}let Q=(()=>{class t{constructor(r,a,h,V,z,B,M){this.fb=r,this.userService=a,this.companyService=h,this.authService=V,this.activatedRoute=z,this.toastrService=B,this.router=M,this.userRole=null,this.userRoleLabelMapping=u.o,this.userRoleEnumSource=Object.values(u.t).filter(d=>"number"==typeof d),this.unsubscribe=[],this._onDestroy=new v.x,this.isLoadingSubject=new Z.X(!1),this.isLoading$=this.isLoadingSubject.asObservable(),this.userRole=this.authService.currentUserValue.roleId,this.userRole!=u.t.SystemAdmin&&(this.userRoleEnumSource=this.userRoleEnumSource.filter(d=>d!=u.t.SystemAdmin))}ngOnInit(){this.companyService.getCompanies().subscribe(r=>{this._companyList=r}),this.id=this.activatedRoute.snapshot.params.id,this.userService.getUserDetail(this.id).subscribe(r=>{this.updateUserForm.controls.id.setValue(r.data.id),this.updateUserForm.controls.roleId.setValue(r.data.roleId),this.updateUserForm.controls.companyId.setValue(r.data.companyId),this.updateUserForm.controls.name.setValue(r.data.name),this.updateUserForm.controls.surname.setValue(r.data.surname),this.updateUserForm.controls.email.setValue(r.data.email),this.updateUserForm.controls.phoneNumber.setValue(r.data.phoneNumber)}),this.updateUserForm=this.fb.group({id:["",n.kI.required],companyId:[null,n.kI.required],roleId:[null,n.kI.required],name:["",n.kI.required],surname:["",n.kI.required],email:["",[n.kI.required,n.kI.email]],phoneNumber:["",n.kI.required]})}updateUser(){this.isLoadingSubject.next(!0),this.message="",this.updateUserForm.valid?this.userService.updateUser(this.updateUserForm.value).subscribe(r=>{this.toastrService.success("\u0130\u015flem Ba\u015far\u0131l\u0131"),this.isLoadingSubject.next(!1),this.router.navigate(["/users"])},r=>{console.log(r),r.error.messages.forEach(a=>{this.message+=a+". "}),this.toastrService.error(this.message,"Hata"),this.isLoadingSubject.next(!1)}):(this.toastrService.warning("Formu Kontrol Ediniz.","Uyar\u0131"),this.isLoadingSubject.next(!1))}hasRole(r){let a=!1;return this.userRole==r&&(a=!0),a}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(n.qu),e.Y36(T.K),e.Y36(y.J),e.Y36(b.e),e.Y36(l.gz),e.Y36(x._W),e.Y36(l.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-update"]],inputs:{id:"id"},decls:48,vars:17,consts:[["id","kt_profile_details_view",1,"card","mb-5","mb-xl-12"],[1,"card-header","cursor-pointer"],[1,"card-title","m-0"],[1,"fw-bolder","m-0"],["novalidate","novalidate",1,"form","col-lg-12","mx-auto",3,"formGroup"],["type","text","matInput","","name","id","formControlName","id","hidden",""],[1,"card-body","p-9"],[1,"row"],[1,"col-lg-6","mb-5","fv-row"],["appearance","fill",1,"example-full-width"],["type","text","matInput","","name","name","formControlName","name"],[4,"ngIf"],["type","text","matInput","","name","surname","formControlName","surname"],["type","text","matInput","","name","email","formControlName","email"],["type","text","matInput","","name","phoneNumber","formControlName","phoneNumber"],["name","roleId","formControlName","roleId"],[3,"value",4,"ngFor","ngForOf"],["class","col-lg-6 mb-5 fv-row",4,"ngIf"],[1,"card-footer","d-flex","justify-content-end","py-6","px-9"],["type","button",1,"btn","btn-sm","btn-success",3,"disabled","click"],[3,"value"],["formControlName","companyId"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(r,a){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e._uU(4,"Kullan\u0131c\u0131 G\xfcncelle"),e.qZA()()(),e.TgZ(5,"form",4),e._UZ(6,"input",5),e.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"mat-form-field",9)(11,"mat-label"),e._uU(12,"Ad"),e.qZA(),e._UZ(13,"input",10),e.YNc(14,I,4,0,"mat-error",11),e.qZA()(),e.TgZ(15,"div",8)(16,"mat-form-field",9)(17,"mat-label"),e._uU(18,"Soyad"),e.qZA(),e._UZ(19,"input",12),e.YNc(20,A,4,0,"mat-error",11),e.qZA()(),e.TgZ(21,"div",8)(22,"mat-form-field",9)(23,"mat-label"),e._uU(24,"E-posta"),e.qZA(),e._UZ(25,"input",13),e.YNc(26,F,4,0,"mat-error",11),e.qZA()(),e.TgZ(27,"div",8)(28,"mat-form-field",9)(29,"mat-label"),e._uU(30,"Telefon Numaras\u0131"),e.qZA(),e._UZ(31,"input",14),e.YNc(32,C,4,0,"mat-error",11),e.qZA()(),e.TgZ(33,"div",8)(34,"mat-form-field",9)(35,"mat-label"),e._uU(36,"Kullan\u0131c\u0131 Rol\xfc"),e.qZA(),e.TgZ(37,"mat-select",15),e.YNc(38,S,2,2,"mat-option",16),e.qZA(),e.YNc(39,N,4,0,"mat-error",11),e.qZA()(),e.YNc(40,L,8,2,"div",17),e.qZA()(),e.TgZ(41,"div",18)(42,"button",19),e.NdJ("click",function(){return a.updateUser()}),e.ALo(43,"async"),e.YNc(44,q,2,0,"ng-container",11),e.ALo(45,"async"),e.YNc(46,Y,4,2,"ng-container",11),e.ALo(47,"async"),e.qZA()()()()),2&r&&(e.xp6(5),e.Q6J("formGroup",a.updateUserForm),e.xp6(9),e.Q6J("ngIf",a.updateUserForm.controls.name.hasError("required")),e.xp6(6),e.Q6J("ngIf",a.updateUserForm.controls.surname.hasError("required")),e.xp6(6),e.Q6J("ngIf",a.updateUserForm.controls.email.hasError("required")),e.xp6(6),e.Q6J("ngIf",a.updateUserForm.controls.phoneNumber.hasError("required")),e.xp6(6),e.Q6J("ngForOf",a.userRoleEnumSource),e.xp6(1),e.Q6J("ngIf",a.updateUserForm.controls.roleId.hasError("required")),e.xp6(1),e.Q6J("ngIf",a.hasRole(1)),e.xp6(2),e.Q6J("disabled",a.updateUserForm.invalid||e.lcZ(43,11,a.isLoading$)),e.xp6(2),e.Q6J("ngIf",!e.lcZ(45,13,a.isLoading$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(47,15,a.isLoading$)))},dependencies:[i.sg,i.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,m.TO,m.KE,m.hX,c.Nt,f.gD,U.ey,i.Ov]}),t})();var g=o(8705),E=o(520),R=o(6856),j=o(8076),O=o(4619);let K=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[i.ez,l.Bz.forChild([{path:"",component:Q}]),n.u5,n.UX,E.JF,O.vi,j.x,m.lN,c.c,R.FA,U.XK,g.EC,g.K,f.LD]}),t})()}}]);